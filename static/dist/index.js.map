{"version":3,"file":"index.js","sources":["../../src/utils/scroll-direction.js","../../src/utils/scroll-observer.js","../../src/index.js"],"sourcesContent":["/**\r\n *\r\n * @param {HTMLElement} root\r\n */\r\nexport default function(root) {\r\n\tlet subscribers = [];\r\n\tlet getter = \"scrollY\" in root ? \"scrollY\" : \"scrollTop\";\r\n\tlet lastY = root[getter];\r\n\tlet lastState;\r\n\tfunction handler() {\r\n\t\tlet nextY = root[getter];\r\n\t\tlet nextState = nextY > lastY;\r\n\t\tif (nextState != lastState) {\r\n\t\t\tsubscribers.forEach(el => {\r\n\t\t\t\tlet textState = nextState ? \"bottom\" : \"top\";\r\n\t\t\t\tif (el instanceof HTMLElement) {\r\n\t\t\t\t\tel.dataset.direction = textState;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tel(textState);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tlastState = nextState;\r\n\t\t}\r\n\t\tlastY = nextY;\r\n\t}\r\n\troot.addEventListener(\"scroll\", handler);\r\n\treturn {\r\n\t\tpush(value) {\r\n\t\t\tsubscribers.push(value);\r\n\t\t},\r\n\t\tclear() {\r\n\t\t\troot.removeEventListener(\"scroll\", handler);\r\n\t\t}\r\n\t};\r\n}\r\n","export default function() {\r\n\treturn new IntersectionObserver(\r\n\t\tentries =>\r\n\t\t\tentries.forEach(({ isIntersecting, target }) => {\r\n\t\t\t\ttarget[isIntersecting ? \"setAttribute\" : \"removeAttribute\"](\r\n\t\t\t\t\t\"intercepted\",\r\n\t\t\t\t\t\"\"\r\n\t\t\t\t);\r\n\t\t\t\tif (target.dataset.src) {\r\n\t\t\t\t\ttarget.setAttribute(\"src\", target.dataset.src);\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\r\n\t\t{\r\n\t\t\trootMargin: \"200px 0px\"\r\n\t\t}\r\n\t);\r\n}\r\n","import scrollDirection from \"./utils/scroll-direction\";\r\nimport createScrollObserver from \"./utils/scroll-observer\";\r\n\r\nlet eventScroll = scrollDirection(window);\r\n\r\ndocument\r\n\t.querySelectorAll(\"[data-direction]\")\r\n\t.forEach(el => eventScroll.push(el));\r\n\r\ndocument.querySelectorAll(\"[href]\").forEach(link => {\r\n\tlet href = link.getAttribute(\"href\");\r\n\tif (/^#(.+)/.test(href)) {\r\n\t\tif (!document.querySelector(href)) {\r\n\t\t\tlink.setAttribute(\"href\", __dirsite + href);\r\n\t\t}\r\n\t}\r\n});\r\n\r\ndocument.querySelectorAll(\"[data-toggle]\").forEach(el => {\r\n\tlet toggle = el.dataset.toggle;\r\n\tel.addEventListener(\"click\", () => {\r\n\t\tdocument\r\n\t\t\t.querySelectorAll(toggle)\r\n\t\t\t.forEach(el => el.classList.toggle(\"--active\"));\r\n\t});\r\n});\r\n\r\nlet scrollObserver = createScrollObserver();\r\n\r\ndocument\r\n\t.querySelectorAll(\"[data-scroll],[data-src]\")\r\n\t.forEach(el => scrollObserver.observe(el));\r\n"],"names":["root","subscribers","getter","lastY","lastState","handler","nextY","nextState","forEach","el","textState","HTMLElement","dataset","direction","addEventListener","push","value","clear","removeEventListener","IntersectionObserver","entries","isIntersecting","target","src","setAttribute","rootMargin","eventScroll","scrollDirection","window","document","querySelectorAll","link","href","getAttribute","test","querySelector","__dirsite","toggle","classList","scrollObserver","createScrollObserver","observe"],"mappings":"AAAA;;;;AAIA,AAAe,0BAASA,IAAT,EAAe;MACzBC,WAAW,GAAG,EAAlB;MACIC,MAAM,GAAG,aAAaF,IAAb,GAAoB,SAApB,GAAgC,WAA7C;MACIG,KAAK,GAAGH,IAAI,CAACE,MAAD,CAAhB;MACIE,SAAJ;;WACSC,OAAT,GAAmB;QACdC,KAAK,GAAGN,IAAI,CAACE,MAAD,CAAhB;QACIK,SAAS,GAAGD,KAAK,GAAGH,KAAxB;;QACII,SAAS,IAAIH,SAAjB,EAA4B;MAC3BH,WAAW,CAACO,OAAZ,CAAoB,UAAAC,EAAE,EAAI;YACrBC,SAAS,GAAGH,SAAS,GAAG,QAAH,GAAc,KAAvC;;YACIE,EAAE,YAAYE,WAAlB,EAA+B;UAC9BF,EAAE,CAACG,OAAH,CAAWC,SAAX,GAAuBH,SAAvB;SADD,MAEO;UACND,EAAE,CAACC,SAAD,CAAF;;OALF;MAQAN,SAAS,GAAGG,SAAZ;;;IAEDJ,KAAK,GAAGG,KAAR;;;EAEDN,IAAI,CAACc,gBAAL,CAAsB,QAAtB,EAAgCT,OAAhC;SACO;IACNU,IADM,gBACDC,KADC,EACM;MACXf,WAAW,CAACc,IAAZ,CAAiBC,KAAjB;KAFK;IAINC,KAJM,mBAIE;MACPjB,IAAI,CAACkB,mBAAL,CAAyB,QAAzB,EAAmCb,OAAnC;;GALF;;;AC1Bc,iCAAW;SAClB,IAAIc,oBAAJ,CACN,UAAAC,OAAO;WACNA,OAAO,CAACZ,OAAR,CAAgB,gBAAgC;UAA7Ba,cAA6B,QAA7BA,cAA6B;UAAbC,MAAa,QAAbA,MAAa;MAC/CA,MAAM,CAACD,cAAc,GAAG,cAAH,GAAoB,iBAAnC,CAAN,CACC,aADD,EAEC,EAFD;;UAIIC,MAAM,CAACV,OAAP,CAAeW,GAAnB,EAAwB;QACvBD,MAAM,CAACE,YAAP,CAAoB,KAApB,EAA2BF,MAAM,CAACV,OAAP,CAAeW,GAA1C;;KANF,CADM;GADD,EAYN;IACCE,UAAU,EAAE;GAbP,CAAP;;;ACED,IAAIC,WAAW,GAAGC,eAAe,CAACC,MAAD,CAAjC;AAEAC,QAAQ,CACNC,gBADF,CACmB,kBADnB,EAEEtB,OAFF,CAEU,UAAAC,EAAE;SAAIiB,WAAW,CAACX,IAAZ,CAAiBN,EAAjB,CAAJ;CAFZ;AAIAoB,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,EAAoCtB,OAApC,CAA4C,UAAAuB,IAAI,EAAI;MAC/CC,IAAI,GAAGD,IAAI,CAACE,YAAL,CAAkB,MAAlB,CAAX;;MACI,SAASC,IAAT,CAAcF,IAAd,CAAJ,EAAyB;QACpB,CAACH,QAAQ,CAACM,aAAT,CAAuBH,IAAvB,CAAL,EAAmC;MAClCD,IAAI,CAACP,YAAL,CAAkB,MAAlB,EAA0BY,SAAS,GAAGJ,IAAtC;;;CAJH;AASAH,QAAQ,CAACC,gBAAT,CAA0B,eAA1B,EAA2CtB,OAA3C,CAAmD,UAAAC,EAAE,EAAI;MACpD4B,MAAM,GAAG5B,EAAE,CAACG,OAAH,CAAWyB,MAAxB;EACA5B,EAAE,CAACK,gBAAH,CAAoB,OAApB,EAA6B,YAAM;IAClCe,QAAQ,CACNC,gBADF,CACmBO,MADnB,EAEE7B,OAFF,CAEU,UAAAC,EAAE;aAAIA,EAAE,CAAC6B,SAAH,CAAaD,MAAb,CAAoB,UAApB,CAAJ;KAFZ;GADD;CAFD;AASA,IAAIE,cAAc,GAAGC,oBAAoB,EAAzC;AAEAX,QAAQ,CACNC,gBADF,CACmB,0BADnB,EAEEtB,OAFF,CAEU,UAAAC,EAAE;SAAI8B,cAAc,CAACE,OAAf,CAAuBhC,EAAvB,CAAJ;CAFZ"}