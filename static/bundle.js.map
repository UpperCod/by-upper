{"version":3,"file":"bundle.js","sources":["../src/utils/scroll-direction.js","../src/utils/scroll-observer.js","../src/bundle.js"],"sourcesContent":["/**\r\n *\r\n * @param {HTMLElement} root\r\n */\r\nexport default function (root) {\r\n  let subscribers = [];\r\n  let getter = \"scrollY\" in root ? \"scrollY\" : \"scrollTop\";\r\n  let lastY = root[getter];\r\n  let lastState;\r\n  function handler() {\r\n    let nextY = root[getter];\r\n    let nextState = nextY > lastY;\r\n    if (nextState != lastState) {\r\n      subscribers.forEach((el) => {\r\n        let textState = nextState ? \"bottom\" : \"top\";\r\n        if (el instanceof HTMLElement) {\r\n          el.dataset.direction = textState;\r\n        } else {\r\n          el(textState);\r\n        }\r\n      });\r\n      lastState = nextState;\r\n    }\r\n    lastY = nextY;\r\n  }\r\n  root.addEventListener(\"scroll\", handler);\r\n  return {\r\n    push(value) {\r\n      subscribers.push(value);\r\n    },\r\n    clear() {\r\n      root.removeEventListener(\"scroll\", handler);\r\n    },\r\n  };\r\n}\r\n","const OBSERVER = Symbol(\"scroll.observer\");\r\nexport default function () {\r\n  let intersection = new IntersectionObserver(\r\n    (entries) =>\r\n      entries.forEach((event) => {\r\n        event.target[OBSERVER](event);\r\n      }),\r\n    {\r\n      rootMargin: \"200px 0px\",\r\n    }\r\n  );\r\n\r\n  return (element) => {\r\n    let node = element;\r\n    let dataset = element.dataset;\r\n    switch (dataset.scrollBefore) {\r\n      case \"nextSibling\":\r\n        node = element.nextSibling;\r\n        break;\r\n    }\r\n    node[OBSERVER] = ({ isIntersecting }) => {\r\n      let state = isIntersecting ? \"intercepted\" : \"not-intercepted\";\r\n      dataset.scrollBefore = state;\r\n      if (dataset.src && isIntersecting) {\r\n        if (!element.hasAttribute(\"src\")) {\r\n          if (element.localName == \"video\") {\r\n            element.addEventListener(\"canplay\", () => {\r\n              setTimeout(() => {\r\n                element.style.opacity = 1;\r\n              }, 100);\r\n            });\r\n          }\r\n          element.setAttribute(\"src\", dataset.src);\r\n        }\r\n        delete dataset.src;\r\n      }\r\n    };\r\n\r\n    intersection.observe(node);\r\n  };\r\n}\r\n","import scrollDirection from \"./utils/scroll-direction\";\r\nimport createScrollObserver from \"./utils/scroll-observer\";\r\n\r\nlet eventScroll = scrollDirection(window);\r\n\r\ndocument\r\n  .querySelectorAll(\"[data-direction]\")\r\n  .forEach(el => eventScroll.push(el));\r\n\r\ndocument.querySelectorAll(\"[href]\").forEach(link => {\r\n  let href = link.getAttribute(\"href\");\r\n  if (/^#(.+)/.test(href)) {\r\n    if (!document.querySelector(href)) {\r\n      link.setAttribute(\"href\", __dirsite + href);\r\n    }\r\n  }\r\n});\r\n\r\ndocument.querySelectorAll(\"[data-toggle]\").forEach(el => {\r\n  let toggle = el.dataset.toggle;\r\n  el.addEventListener(\"click\", () => {\r\n    document\r\n      .querySelectorAll(toggle)\r\n      .forEach(el => el.classList.toggle(\"--active\"));\r\n  });\r\n});\r\n\r\nlet scrollObserver = createScrollObserver();\r\n\r\ndocument\r\n  .querySelectorAll(\"[data-scroll],[data-src]\")\r\n  .forEach(el => scrollObserver.observe(el));\r\n"],"names":["root","subscribers","getter","lastY","lastState","handler","nextY","nextState","forEach","el","textState","HTMLElement","dataset","direction","addEventListener","push","value","clear","removeEventListener","OBSERVER","Symbol","intersection","IntersectionObserver","entries","event","target","rootMargin","element","node","scrollBefore","nextSibling","isIntersecting","state","src","hasAttribute","localName","setTimeout","style","opacity","setAttribute","observe","eventScroll","scrollDirection","window","document","querySelectorAll","link","href","getAttribute","test","querySelector","__dirsite","toggle","classList","scrollObserver","createScrollObserver"],"mappings":"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"}